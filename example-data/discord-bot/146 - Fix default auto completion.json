{"RepoName":"discord-bot","RepoDescription":"A discord bot for the Wise Old Man project.","RepoUrl":"https://api.github.com/repos/wise-old-man/discord-bot","RepoReadmeFilename":"README.md","RepoReadmeContent":"\u003Cdiv align = \u0022center\u0022\u003E\n\n![Wise Old Man Discord Bot](https://user-images.githubusercontent.com/3278148/86964409-ec5f2880-c15d-11ea-84bf-8b484d60afd2.png)\n\n\uD83D\uDD17 [www.bot.wiseoldman.net](https://bot.wiseoldman.net/)\n\nTrack your Old School Runescape clan\u2019s progress from your own Discord server.\n\n![MIT license](https://img.shields.io/github/license/wise-old-man/wise-old-man) ![Bot repo](https://img.shields.io/badge/wise%20old%20man-discord%20bot-blue)\n\nThe Wise Old Man is an app that tracks your Old School Runescape player progress. Built on top of the OSRS hiscores, it allows you to keep track of your gains, participate in group competitions, collect achievements and much more.\n\nThis repository is an extention of the core project, a Discord Bot to server as a secondary user interface.\n\n[Website](https://bot.wiseoldman.net/) |\n[Discord](https://discord.gg/Ky5vNt2) |\n[Patreon](https://www.patreon.com/wiseoldman)\n\n\u003C/div\u003E\n\n\u003Cbr /\u003E\n\n## \uD83D\uDC6A Related projects\n\n- [Core Repository (API/Webapp)](https://github.com/wise-old-man/wise-old-man)\n- [Discord Bot Landing Page](https://github.com/wise-old-man/bot.wiseoldman.net)\n\n\u003Cbr /\u003E\n\n## \uD83D\uDCDA Technologies\n\nThis project is built using Discord.js, Sequelize and Express.\n\n\u003Cbr /\u003E\n\n## \uD83D\uDCAC Suggestions and bugs\n\nHave a suggestion or a bug to report? [Click here to create a issue](https://github.com/wise-old-man/discord-bot/issues)\n\nHave something else you\u0027d like to discuss? [Join us on discord](https://discord.gg/Ky5vNt2)\n\n\u003Cbr /\u003E\n","Filenames":[".dockerignore",".eslintignore",".eslintrc",".gitattributes",".github/workflows/deploy.yml",".prettierrc",".sequelizerc","Dockerfile","LICENSE","README.md","docker-compose.yml","package.json","src/api/handler.ts","src/api/index.ts","src/api/modules/competitions.ts","src/api/modules/groups.ts","src/api/modules/names.ts","src/api/modules/players.ts","src/api/modules/snapshots.ts","src/api/types.ts","src/api/utils.ts","src/bot.ts","src/commands/CommandError.ts","src/commands/CustomCommands.ts","src/commands/instances/config/ConfigChannelCommand.ts","src/commands/instances/config/ConfigGroupCommand.ts","src/commands/instances/config/ConfigRootCommand.ts","src/commands/instances/general/HelpCommand.ts","src/commands/instances/group/GroupCompetitionCommand.ts","src/commands/instances/group/GroupCompetitionsCommand.ts","src/commands/instances/group/GroupDetailsCommand.ts","src/commands/instances/group/GroupGainedCommand.ts","src/commands/instances/group/GroupHiscoresCommand.ts","src/commands/instances/group/GroupMembersCommand.ts","src/commands/instances/group/GroupRecordsCommand.ts","src/commands/instances/group/GroupRootCommand.ts","src/commands/instances/index.ts","src/commands/instances/moderation/DeletePlayerCommand.ts","src/commands/instances/moderation/NameChangeCommand.ts","src/commands/instances/moderation/ResetCompetitionCodeCommand.ts","src/commands/instances/moderation/ResetGroupCodeCommand.ts","src/commands/instances/moderation/VerifyGroupCommand.ts","src/commands/instances/player/PlayerAchievementsCommand.ts","src/commands/instances/player/PlayerActivitiesCommand.ts","src/commands/instances/player/PlayerBossesCommand.ts","src/commands/instances/player/PlayerEfficiencyCommand.ts","src/commands/instances/player/PlayerGainedCommand.ts","src/commands/instances/player/PlayerSetFlagCommand.ts","src/commands/instances/player/PlayerSetUsernameCommand.ts","src/commands/instances/player/PlayerStatsCommand.ts","src/commands/instances/player/UpdatePlayerCommand.ts","src/commands/router.ts","src/config.ts","src/database/config.ts","src/database/index.ts","src/database/migrations/20200616003302-create-guild-configs-table.ts","src/database/migrations/20200709182151-add-player-alias.ts","src/database/migrations/20210306142806-create-channel-preferences-table.ts","src/database/models/Alias.ts","src/database/models/ChannelPreference.ts","src/database/models/Server.ts","src/database/services/alias.ts","src/database/services/channelPreferences.ts","src/database/services/server.ts","src/deploy-commands.ts","src/events/instances/CompetitionCreated.ts","src/events/instances/CompetitionEnded.ts","src/events/instances/CompetitionEnding.ts","src/events/instances/CompetitionStarted.ts","src/events/instances/CompetitionStarting.ts","src/events/instances/MemberAchievements.ts","src/events/instances/MemberHardcoreDied.ts","src/events/instances/MemberNameChanged.ts","src/events/instances/MembersJoined.ts","src/events/instances/MembersLeft.ts","src/events/instances/index.ts","src/events/router.ts","src/index.ts","src/types.ts","src/utils/autocomplete.ts","src/utils/broadcast.ts","src/utils/countries.ts","src/utils/dates.ts","src/utils/discord.ts","src/utils/flags.ts","src/utils/index.ts","src/utils/levels.ts","src/utils/metrics.ts","src/utils/rendering.ts","src/utils/strings.ts","tsconfig.json","wait-for-it.sh"],"PrNumber":146,"PrTitle":"Fix default auto completion","PrBody":"Fixes #144 ","PrModifiedFiles":[{"Status":"modified","FileName":"src/utils/autocomplete.ts","Contents":"import { customCommands } from \u0027../commands/CustomCommands\u0027;\nimport { COUNTRIES } from \u0027./countries\u0027;\nimport { ALL_METRICS } from \u0027./metrics\u0027;\n\nconst PERIOD_OPTIONS = [\n  { name: \u00275 Min\u0027, value: \u00275min\u0027 },\n  { name: \u0027Day\u0027, value: \u0027day\u0027 },\n  { name: \u0027Week\u0027, value: \u0027week\u0027 },\n  { name: \u0027Month\u0027, value: \u0027month\u0027 },\n  { name: \u0027Year\u0027, value: \u0027year\u0027 }\n];\n\ninterface AutoCompleteOption {\n  name: string;\n  value: string;\n}\n\nfunction matches(currentValue: string, ...options: string[]) {\n  return options.some(opt =\u003E opt.toLowerCase().includes(currentValue.toLowerCase()));\n}\n\nexport function getCountryOptions(currentValue: string): AutoCompleteOption[] {\n  if (!currentValue) return [];\n\n  return COUNTRIES.filter(c =\u003E matches(currentValue, c.name, c.code)).map(c =\u003E ({\n    name: c.name,\n    value: c.code\n  }));\n}\n\nexport function getPeriodOptions(currentValue: string): AutoCompleteOption[] {\n  if (!currentValue) return [];\n  return PERIOD_OPTIONS.filter(p =\u003E matches(currentValue, p.name, p.value));\n}\n\nexport function getMetricOptions(currentValue: string): AutoCompleteOption[] {\n  if (!currentValue) return [];\n\n  return ALL_METRICS.filter(m =\u003E matches(currentValue, m.name, m.key)).map(m =\u003E ({\n    name: m.name,\n    value: m.key\n  }));\n}\n\nexport function getHelpCategoryOptions(currentValue: string): AutoCompleteOption[] {\n  return customCommands\n    .filter(({ command }) =\u003E (!currentValue ? true : matches(currentValue, command)))\n    .map(c =\u003E ({ name: c.name, value: c.command }));\n}\n"}],"GitDiff":"diff --git a/src/utils/autocomplete.ts b/src/utils/autocomplete.ts\n--- a/src/utils/autocomplete.ts\n\u002B\u002B\u002B b/src/utils/autocomplete.ts\n@@ -29,17 \u002B29,16 @@ export function getCountryOptions(currentValue: string): AutoCompleteOption[] {\n }\n \n export function getPeriodOptions(currentValue: string): AutoCompleteOption[] {\n-  if (!currentValue) return [];\n-  return PERIOD_OPTIONS.filter(p =\u003E matches(currentValue, p.name, p.value));\n\u002B  return PERIOD_OPTIONS.filter(p =\u003E (!currentValue ? true : matches(currentValue, p.name, p.value)));\n }\n \n export function getMetricOptions(currentValue: string): AutoCompleteOption[] {\n-  if (!currentValue) return [];\n-\n-  return ALL_METRICS.filter(m =\u003E matches(currentValue, m.name, m.key)).map(m =\u003E ({\n-    name: m.name,\n-    value: m.key\n-  }));\n\u002B  return ALL_METRICS.filter(m =\u003E (!currentValue ? true : matches(currentValue, m.name, m.key))).map(\n\u002B    m =\u003E ({\n\u002B      name: m.name,\n\u002B      value: m.key\n\u002B    })\n\u002B  );\n }\n \n export function getHelpCategoryOptions(currentValue: string): AutoCompleteOption[] {\n"}